!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("@angular/core"),require("@angular/common/http"),require("rxjs/Observable"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/expand"),require("rxjs/add/operator/last"),require("rxjs/add/observable/of"),require("rxjs/add/observable/empty"),require("rxjs/add/observable/from")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common/http","rxjs/Observable","rxjs/add/operator/map","rxjs/add/operator/mergeMap","rxjs/add/operator/expand","rxjs/add/operator/last","rxjs/add/observable/of","rxjs/add/observable/empty","rxjs/add/observable/from"],r):"object"==typeof exports?exports.springhal=r(require("@angular/core"),require("@angular/common/http"),require("rxjs/Observable"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/expand"),require("rxjs/add/operator/last"),require("rxjs/add/observable/of"),require("rxjs/add/observable/empty"),require("rxjs/add/observable/from")):e.springhal=r(e["@angular/core"],e["@angular/common/http"],e["rxjs/Observable"],e["rxjs/add/operator/map"],e["rxjs/add/operator/mergeMap"],e["rxjs/add/operator/expand"],e["rxjs/add/operator/last"],e["rxjs/add/observable/of"],e["rxjs/add/observable/empty"],e["rxjs/add/observable/from"])}(this,function(e,r,t,o,n,a,i,l,u,s){return function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="/",r(r.s=5)}([function(r,t){r.exports=e},function(e,r,t){"use strict";var o=this&&this.__decorate||function(e,r,t,o){var n,a=arguments.length,i=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(i=(a<3?n(i):a>3?n(r,t,i):n(r,t))||i);return a>3&&i&&Object.defineProperty(r,t,i),i},n=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)};Object.defineProperty(r,"__esModule",{value:!0});var a=t(0),i=function(){function e(){}return r=e,e.prototype.build=function(e,r,t){return this.parse(e,r,t)},e.prototype.parse=function(e,r,t,o){if(r._embedded){o=o||this.findRelationName(r);var n=r._embedded[o];if(n&&n instanceof Array){for(var a=new Array,i=0,l=n;i<l.length;i++){var u=l[i];a.push(this.buildObject(e,u,t))}return a}console.error("Can't parse array result: ",r._embedded,o)}return this.buildObject(e,r,t)},e.prototype.findRelationName=function(e){if(!e._embedded)return"";for(var r in e._embedded)return r;return""},e.prototype.buildObject=function(e,t,o){var n=new e,a=n[r.PROTOTYPE_IDENT_HAL_PROPERTIES],i=n[r.PROTOTYPE_IDENT_HAL_LINKS],l=n[r.PROTOTYPE_IDENT_HAL_RESOLVES];return n=this.assignProperties(n,a,t),n=this.assignLinks(n,i,t,o),n=this.assignContent(n,t.content),n=this.assignResolves(n,l,o)},e.prototype.assignProperties=function(e,r,t){if(!r)return e;for(var o=0,n=r;o<n.length;o++){var a=n[o];t[a.relationName]&&Object.defineProperty(e,a.propertyKey,{value:t[a.relationName]})}return e},e.prototype.assignResolves=function(e,r,t){if(!r)return e;for(var o=0,n=r;o<n.length;o++)!function(r){t.resolveAsyncPath(e,r.propertyPath).subscribe(function(t){return Object.defineProperty(e,r.propertyKey,{value:t})})}(n[o]);return e},e.prototype.assignContent=function(e,r){if(!r)return e;for(var t in r)Object.defineProperty(e,t,{value:r[t]});return e},e.prototype.assignLinks=function(e,r,t,o){if(!r)return e;var n=t._links;if(!n)return e;for(var a=0,i=r;a<i.length;a++){var l=i[a];if(n[l.relationName]){var u=n[l.relationName];Object.defineProperty(e,l.propertyKey,{value:o.get(u.href,l.clazz)})}}return e},e.PROTOTYPE_IDENT_HAL_PROPERTIES="halProperties",e.PROTOTYPE_IDENT_HAL_LINKS="halLinks",e.PROTOTYPE_IDENT_HAL_RESOLVES="halResolves",e=r=o([a.Injectable(),n("design:paramtypes",[])],e);var r}();r.HalModelBuilder=i;var l=function(){return function(){}}();r.HalLinkConfig=l;var u=function(){return function(){}}();r.HalPropertyConfig=u;var s=function(){return function(){}}();r.HalResolveConfig=s},function(e,t){e.exports=r},function(e,r,t){"use strict";var o=this&&this.__decorate||function(e,r,t,o){var n,a=arguments.length,i=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(i=(a<3?n(i):a>3?n(r,t,i):n(r,t))||i);return a>3&&i&&Object.defineProperty(r,t,i),i},n=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)};Object.defineProperty(r,"__esModule",{value:!0});var a=t(2),i=t(0),l=t(1),u=t(4),s=t(7);t(8),t(9),t(10),t(11),t(12),t(13),t(14);var d=function(){function e(e,r){this._httpClient=e,this._modelBuilder=r}return e.prototype.get=function(e,r){var t=this;return this._httpClient.get(e).map(function(e){return t._modelBuilder.build(r,e,t)})},e.prototype.resolveAsyncPath=function(e,r){return this.resolveAsync(e,r.split("."))},e.prototype.resolveAsync=function(e,r,t){var o=this;return void 0===t&&(t=!1),r=r.reverse(),s.Observable.of(e).expand(function(e){if(0==r.length)return s.Observable.empty();var n=r.pop(),a=void 0;return n&&(a=e[n]),e instanceof u.HalModel&&a instanceof s.Observable?!0===t?a.flatMap(function(e){if(e instanceof Array){var t=r;return s.Observable.from(e).flatMap(function(e){return o.resolveAsync(e,t)})}return s.Observable.of(e)}):a:s.Observable.of(a)}).last()},e=o([i.Injectable(),n("design:paramtypes",[a.HttpClient,l.HalModelBuilder])],e)}();r.HalRestService=d},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(){return function(){}}();r.HalModel=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(6);r.SpringHalModule=o.SpringHalModule;var n=t(3);r.HalRestService=n.HalRestService;var a=t(4);r.HalModel=a.HalModel;var i=t(15);r.HalLink=i.HalLink,r.HalProperty=i.HalProperty,r.HalResolve=i.HalResolve},function(e,r,t){"use strict";var o=this&&this.__decorate||function(e,r,t,o){var n,a=arguments.length,i=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(i=(a<3?n(i):a>3?n(r,t,i):n(r,t))||i);return a>3&&i&&Object.defineProperty(r,t,i),i};Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(2),i=t(3),l=t(1),u=function(){function e(){}return e=o([n.NgModule({imports:[a.HttpClientModule],exports:[],declarations:[],providers:[i.HalRestService,l.HalModelBuilder]})],e)}();r.SpringHalModule=u},function(e,r){e.exports=t},function(e,r){e.exports=o},function(e,r){e.exports=n},function(e,r){e.exports=a},function(e,r){e.exports=i},function(e,r){e.exports=l},function(e,r){e.exports=u},function(e,r){e.exports=s},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(1);r.HalProperty=function(e){return function(r,t){r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_PROPERTIES]||(r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_PROPERTIES]=new Array),r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_PROPERTIES].push({relationName:e||t,propertyKey:t})}},r.HalLink=function(e,r){return function(t,n){t[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_LINKS]||(t[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_LINKS]=new Array),t[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_LINKS].push({clazz:e,relationName:r||n,propertyKey:n})}},r.HalResolve=function(e){return function(r,t){r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_RESOLVES]||(r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_RESOLVES]=new Array),r[o.HalModelBuilder.PROTOTYPE_IDENT_HAL_RESOLVES].push({propertyKey:t,propertyPath:e})}}}])});